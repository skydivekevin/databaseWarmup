'use strict';

var _commander = require('commander');

var _commander2 = _interopRequireDefault(_commander);

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

var _package = require('../package.json');

var _package2 = _interopRequireDefault(_package);

var _init = require('./init');

var _init2 = _interopRequireDefault(_init);

var _serve = require('./lib/serve');

var _serve2 = _interopRequireDefault(_serve);

var _build = require('./lib/build');

var _build2 = _interopRequireDefault(_build);

var _utils = require('./lib/utils');

var _startProcess = require('./lib/start-process');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_commander2.default.version(_package2.default.version).description('Smooth developer experience for Express.js').option('--debug', 'Run with Node debugger attached').usage('[commands] [-options]');

_commander2.default.command('init').description('Set up new ExpressX application').action(_init2.default);

_commander2.default.command('build').description('Set up new ExpressX application').action(_build2.default);

_commander2.default.command('start').description('Start application').option('--debug', 'Run with Node debugger attached').action(_startProcess.startCommand);

_commander2.default.parse(process.argv);

if (_commander2.default.args.length === 0) {
	(0, _utils.clear)();
	try {
		(0, _serve2.default)(_commander2.default);
	} catch (e) {
		console.error(_chalk2.default.bgRed.black(' ERROR '), _chalk2.default.red("Something went sideways and we didn't expect it. Here's what happened:"));
		console.error(e);
	}
}